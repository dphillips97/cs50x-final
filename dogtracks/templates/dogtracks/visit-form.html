{% extends 'dogtracks/template.html' %}
{% load static %}


{% block content %}
<div class="container">

	<h1 class="title">{{ title }}</h1>

	<form action="" method="post">
		{% csrf_token %}

		<div class="field">
			<label class="label">{{ form.start.label }}</label>
			<div class="control">
				{{ form.start }}
			</div>
		</div>

		<div class="field">
			<label class="label">{{ form.end.label }}</label>
			<div class="control">
				{{ form.end }}
			</div>
		</div>

		<div class="field">
			<label class="label">{{ form.notes.label }}</label>
			<div class="control">
				{{ form.notes }}
			</div>
		</div>
		
		<div class="field">
			<div class="control">
				<input class="button is-primary" type="submit" value="Save changes" />
			</div>
		</div>
	</form>

	<br>
	
	<div class="field is-grouped">
		<div class="control">
			<button id="btn-cancel-changes" class="button is-info">
				Return to Dashboard
			</button>
		</div>

		{% if form.instance.id %} 
		<!-- If instance already exists, show 'delete' -->
		<!-- If instance exists and is requested, show 'cancel' button -->
		<div class="control">
			<!-- Allow stauts update to 'cancel' -->
			{% if form.instance.status == 'request' %}
			<button id="btn-cancel-visit" data-instance="{{ form.instance.id }}" 
			data-status="{{ form.instance.status }}" class="button is-warning">
				Cancel This Visit
			</button>
			{% endif %}
		</div>
		<div class="control">
			<a class="button is-danger is-link" href="/dogtracks/remove-visit/{{ form.instance.id }}">
				Delete this Visit
			</a>
		</div>
		{% endif %}
	</div>
</div>
{% endblock %}